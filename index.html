<!-- åç‰‡ç”Ÿæˆå™¨ï¼ˆä¿®å¤ generateCard å’Œ updateCustomColor æœªå®šä¹‰é”™è¯¯ + æ ·å¼å¸ƒå±€ä¼˜åŒ–ï¼‰ -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åç‰‡ç”Ÿæˆå™¨</title>
  <style>
    :root {
      --primary-color: #3498db;
      --secondary-color: #2c3e50;
      --accent-color: #e74c3c;
      --light-gray: #f5f5f5;
      --dark-gray: #333;
      --shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: var(--light-gray);
      color: var(--dark-gray);
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 960px;
      margin: auto;
      padding: 40px 20px;
      text-align: center;
    }
    h1 {
      color: var(--secondary-color);
      margin-bottom: 10px;
    }
    .form-container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      text-align: left;
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
    }
    input[type="text"],
    input[type="email"],
    input[type="file"] {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    .form-group .color-label-title {
      font-weight: bold;
      margin-bottom: 12px;
      color: var(--secondary-color);
      border-left: 4px solid var(--primary-color);
      padding-left: 10px;
    }
    .theme-style-section {
      margin-bottom: 25px;
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border-left: 4px solid var(--primary-color);
    }
    .color-label-title {
      font-weight: bold;
      margin-bottom: 15px;
      color: var(--secondary-color);
      font-size: 16px;
    }
    .theme-color-setting {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 15px;
    }
    .theme-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      padding: 8px;
      border-radius: 8px;
      width: 60px;
    }
    .theme-option:hover {
      background-color: rgba(0,0,0,0.03);
      transform: translateY(-2px);
    }
    .theme-option.active {
      background-color: rgba(0,0,0,0.05);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .theme-color {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }
    .theme-option:hover .theme-color {
      transform: scale(1.1);
    }
    .theme-option.active .theme-color {
      box-shadow: 0 0 0 2px var(--primary-color);
    }
    .theme-name {
      font-size: 13px;
      color: var(--secondary-color);
      white-space: nowrap;
      font-weight: 500;
    }
    .theme-blue .theme-color { background: #3498db; }
    .theme-green .theme-color { background: #2ecc71; }
    .theme-purple .theme-color { background: #9b59b6; }
    .theme-red .theme-color { background: #e74c3c; }
    .theme-dark .theme-color { background: #34495e; }
    
    .color-picker {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 8px;
      border-radius: 8px;
      width: 60px;
      transition: all 0.2s ease;
    }
    
    .color-picker:hover {
      background-color: rgba(0,0,0,0.03);
      transform: translateY(-2px);
    }
    
    .theme-picker {
      position: relative;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }
    
    .theme-picker:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .theme-picker input[type="color"] {
      position: absolute;
      width: 150%;
      height: 150%;
      top: -25%;
      left: -25%;
      padding: 0;
      border: none;
      cursor: pointer;
    }
    
    .color-label {
      font-size: 13px;
      color: var(--secondary-color);
      white-space: nowrap;
      font-weight: 500;
    }
    
    button {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
      font-weight: 500;
    }
    button:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    #canvasWrapper {
      position: relative;
      display: inline-block;
      margin-top: 20px;
      border-radius: 10px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease;
    }
    #canvasWrapper:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.15);
    }
    #downloadIcon {
      position: absolute;
      top: -15px;
      right: -15px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      line-height: 40px;
      text-align: center;
      cursor: pointer;
      box-shadow: var(--shadow);
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.3s ease;
      z-index: 10;
    }
    #canvasWrapper:hover #downloadIcon {
      opacity: 1;
      transform: scale(1);
    }
    canvas {
      border-radius: 10px;
      border: 1px solid #eee;
      background: white;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>åç‰‡ç”Ÿæˆå™¨</h1>
    <div class="form-container">
      <div class="form-group"><label for="name">å§“å</label><input type="text" id="name" value="å¼ ä¸‰"></div>
      <div class="form-group"><label for="title">èŒä½</label><input type="text" id="title" value="äº§å“ç»ç†"></div>
      <div class="form-group"><label for="company">å…¬å¸</label><input type="text" id="company" value="ç§‘æŠ€æœ‰é™å…¬å¸"></div>
      <div class="form-group"><label for="phone">ç”µè¯</label><input type="text" id="phone" value="138-0000-0000"></div>
      <div class="form-group"><label for="phoneIcon">ç”µè¯å›¾æ ‡</label><input type="text" id="phoneIcon" value="ğŸ“"></div>
      <div class="form-group"><label for="email">é‚®ç®±</label><input type="email" id="email" value="example@company.com"></div>
      <div class="form-group"><label for="emailIcon">é‚®ç®±å›¾æ ‡</label><input type="text" id="emailIcon" value="ğŸ“©"></div>
      <div class="form-group"><label for="avatar">ä¸Šä¼ å¤´åƒ</label><input type="file" id="avatar" accept="image/*"></div>

      <div class="form-group theme-style-section">
        <div class="color-label-title">ä¸»é¢˜æ ·å¼é€‰æ‹©</div>
        <div class="theme-color-setting">
          <div class="theme-option theme-blue active" onclick="setTheme('blue')" title="è“è‰²ä¸»é¢˜">
            <div class="theme-color"></div>
            <div class="theme-name">è“è‰²</div>
          </div>
          <div class="theme-option theme-green" onclick="setTheme('green')" title="ç»¿è‰²ä¸»é¢˜">
            <div class="theme-color"></div>
            <div class="theme-name">ç»¿è‰²</div>
          </div>
          <div class="theme-option theme-purple" onclick="setTheme('purple')" title="ç´«è‰²ä¸»é¢˜">
            <div class="theme-color"></div>
            <div class="theme-name">ç´«è‰²</div>
          </div>
          <div class="theme-option theme-red" onclick="setTheme('red')" title="çº¢è‰²ä¸»é¢˜">
            <div class="theme-color"></div>
            <div class="theme-name">çº¢è‰²</div>
          </div>
          <div class="theme-option theme-dark" onclick="setTheme('dark')" title="æ·±è‰²ä¸»é¢˜">
            <div class="theme-color"></div>
            <div class="theme-name">é»‘è‰²</div>
          </div>
          
          <div class="color-picker">
            <div class="theme-picker" title="ä¸»è‰²è°ƒ">
              <input type="color" id="primaryColor" value="#3498db" onchange="updateCustomColor()">
            </div>
            <div class="color-label">ä¸»è‰²è°ƒ</div>
          </div>
          
          <div class="color-picker">
            <div class="theme-picker" title="æ¬¡è‰²è°ƒ">
              <input type="color" id="secondaryColor" value="#2c3e50" onchange="updateCustomColor()">
            </div>
            <div class="color-label">æ¬¡è‰²è°ƒ</div>
          </div>
        </div>
      </div>

      <button onclick="generateCard()">ç”Ÿæˆåç‰‡</button>
    </div>
    <div id="canvasWrapper">
      <button id="downloadIcon" onclick="downloadCard()" title="ä¸‹è½½åç‰‡">â¬‡</button>
      <canvas id="cardCanvas" width="400" height="200"></canvas>
    </div>

<script>
// åˆå§‹åŒ–å˜é‡
const canvas = document.getElementById("cardCanvas");
const ctx = canvas.getContext("2d");
let currentTheme = "blue";

// è·å–ä¸»é¢˜é¢œè‰²
function getThemeColors() {
  const style = getComputedStyle(document.documentElement);
  return {
    primary: style.getPropertyValue("--primary-color").trim(),
    secondary: style.getPropertyValue("--secondary-color").trim()
  };
}

// è®¾ç½®ä¸»é¢˜
function setTheme(theme) {
  // ç§»é™¤æ‰€æœ‰ä¸»é¢˜é€‰é¡¹çš„activeç±»
  document.querySelectorAll(".theme-option").forEach(option => {
    option.classList.remove("active");
  });
  
  // æ·»åŠ activeç±»åˆ°é€‰ä¸­çš„ä¸»é¢˜
  document.querySelector(`.theme-${theme}`).classList.add("active");
  
  // è®¾ç½®ä¸»é¢˜é¢œè‰²
  let primaryColor, secondaryColor;
  
  switch(theme) {
    case "blue":
      primaryColor = "#3498db";
      secondaryColor = "#2c3e50";
      break;
    case "green":
      primaryColor = "#2ecc71";
      secondaryColor = "#27ae60";
      break;
    case "purple":
      primaryColor = "#9b59b6";
      secondaryColor = "#8e44ad";
      break;
    case "red":
      primaryColor = "#e74c3c";
      secondaryColor = "#c0392b";
      break;
    case "dark":
      primaryColor = "#34495e";
      secondaryColor = "#2c3e50";
      break;
  }
  
  // æ›´æ–°CSSå˜é‡
  document.documentElement.style.setProperty("--primary-color", primaryColor);
  document.documentElement.style.setProperty("--secondary-color", secondaryColor);
  
  // æ›´æ–°é¢œè‰²é€‰æ‹©å™¨çš„å€¼
  document.getElementById("primaryColor").value = primaryColor;
  document.getElementById("secondaryColor").value = secondaryColor;
  
  currentTheme = theme;
  
  // å¦‚æœå·²æœ‰åç‰‡å†…å®¹ï¼Œåˆ™é‡æ–°ç”Ÿæˆ
  if (document.getElementById("name").value) {
    generateCard();
  }
}

// æ›´æ–°è‡ªå®šä¹‰é¢œè‰²
function updateCustomColor() {
  const primaryColor = document.getElementById("primaryColor").value;
  const secondaryColor = document.getElementById("secondaryColor").value;
  
  document.documentElement.style.setProperty("--primary-color", primaryColor);
  document.documentElement.style.setProperty("--secondary-color", secondaryColor);
  
  // ç§»é™¤æ‰€æœ‰ä¸»é¢˜é€‰é¡¹çš„activeç±»
  document.querySelectorAll(".theme-option").forEach(option => {
    option.classList.remove("active");
  });
  
  // å¦‚æœå·²æœ‰åç‰‡å†…å®¹ï¼Œåˆ™é‡æ–°ç”Ÿæˆ
  if (document.getElementById("name").value) {
    generateCard();
  }
}

// é»˜è®¤å¤´åƒ
const defaultAvatar = new Image();
defaultAvatar.src = "data:image/svg+xml;base64," + btoa(`
  <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80">
    <rect width="100%" height="100%" fill="#e0e0e0"/>
    <circle cx="40" cy="30" r="20" fill="#f5f5f5"/>
    <rect x="20" y="55" width="40" height="15" fill="#f5f5f5"/>
  </svg>
`);

// ç”Ÿæˆåç‰‡
function generateCard() {
  const name = document.getElementById("name").value;
  const title = document.getElementById("title").value;
  const company = document.getElementById("company").value;
  const phone = document.getElementById("phone").value;
  const email = document.getElementById("email").value;
  const phoneIcon = document.getElementById("phoneIcon").value;
  const emailIcon = document.getElementById("emailIcon").value;
  const avatarInput = document.getElementById("avatar");
  const colors = getThemeColors();

  // æ¸…ç©ºèƒŒæ™¯
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // æ·»åŠ è£…é¥°å…ƒç´ 
  ctx.fillStyle = colors.primary;
  ctx.fillRect(0, 0, 10, canvas.height);

  // æ·»åŠ åº•éƒ¨è£…é¥°
  ctx.fillStyle = colors.secondary;
  ctx.fillRect(0, canvas.height - 20, canvas.width, 20);

  // å¤´åƒé€»è¾‘
  if (avatarInput.files.length > 0) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const userImg = new Image();
      userImg.onload = () => {
        drawAvatar(userImg);
        drawText();
      };
      userImg.src = e.target.result;
    };
    reader.readAsDataURL(avatarInput.files[0]);
  } else {
    drawAvatar(defaultAvatar);
    drawText();
  }

  function drawText() {
    // å§“å
    ctx.fillStyle = colors.secondary;
    ctx.font = "bold 22px 'Helvetica Neue', Arial";
    ctx.fillText(name || "å§“å", 120, 50);

    // èŒä½
    ctx.fillStyle = colors.primary;
    ctx.font = "16px 'Helvetica Neue', Arial";
    ctx.fillText(title || "èŒä½", 120, 75);

    // å…¬å¸
    ctx.fillStyle = colors.secondary;
    ctx.font = "bold 14px 'Helvetica Neue', Arial";
    ctx.fillText(company || "å…¬å¸åç§°", 120, 105);

    // è”ç³»ä¿¡æ¯
    ctx.fillStyle = "#555";
    ctx.font = "14px 'Helvetica Neue', Arial";

    // ç”µè¯å›¾æ ‡å’Œç”µè¯
    ctx.fillText(phoneIcon + " " + (phone || "ç”µè¯å·ç "), 120, 135);

    // é‚®ç®±å›¾æ ‡å’Œé‚®ç®±
    ctx.fillText(emailIcon + " " + (email || "ç”µå­é‚®ç®±"), 120, 160);
  }
}

// ç»˜åˆ¶å¤´åƒ
function drawAvatar(img) {
  ctx.save();
  ctx.beginPath();
  ctx.arc(60, 60, 40, 0, Math.PI * 2);
  ctx.closePath();
  ctx.clip();
  ctx.drawImage(img, 20, 20, 80, 80);
  ctx.restore();
}

// ä¸‹è½½åç‰‡
function downloadCard() {
  const link = document.createElement("a");
  link.download = "business_card.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}

// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
window.onload = function() {
  // è®¾ç½®é»˜è®¤ä¸»é¢˜
  setTheme("blue");
  // ç”Ÿæˆåˆå§‹åç‰‡
  generateCard();
};
</script>
</body>
</html>
